document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("searchIcon"),t=document.getElementById("buttonsearch"),a=document.getElementById("searchForm"),n=document.getElementById("searchInput"),i=document.getElementById("sitelink"),s=document.getElementById("iconnav"),d=()=>{e.classList.add("hide"),a.classList.add("show"),setTimeout((()=>n.focus()),100),i.style.visibility="hidden",s.style.visibility="hidden",t.style.display="none"};e&&e.addEventListener("click",d),t&&(t.addEventListener("click",d),console.log("buttonSearch ditemukan")),document.addEventListener("click",(n=>{a.contains(n.target)||e.contains(n.target)||t.contains(n.target)||(a.classList.remove("show"),e.classList.remove("hide"),i.style.visibility="visible",s.style.visibility="visible",t.style.display="block")}));const o=document.getElementById("searchResults");let l=[];fetch("https://raw.githubusercontent.com/hisyam-coder/dataprodukbharata/refs/heads/bharata/data-bharata-keyword.json").then((e=>e.json())).then((e=>{l=e})).catch((e=>{console.error("Gagal mengambil data JSON:",e)}));n.addEventListener("input",(e=>{(e=>{if(o.innerHTML="",!e.trim()||e.trim().length<3)return void(o.style.display="none");const t=e.toLowerCase(),a=new Set,n={};if(l.forEach((e=>{e.nama.toLowerCase().includes(t)?(a.add(e.nama),n[e.nama]=new Set(e.kata_kunci.filter((e=>e.toLowerCase().includes(t))))):e.kata_kunci.forEach((i=>{i.toLowerCase().includes(t)&&(a.add(e.nama),n[e.nama]||(n[e.nama]=new Set),n[e.nama].add(i))}))})),a.size>0)o.style.display="block",Array.from(a).slice(0,5).forEach((e=>{const t=document.createElement("div"),a=`https://www.bharatainternasional.store/p/produk.html?bh=bharata.${e.split("Bharata")[0].replace(/\s+/g,"").replace(/[^a-zA-Z0-9]/g,"")}`;t.innerHTML=`\n          <div><a style="text-decoration:none; color: darkgreen; font-weight:bold;" href="${a}" target="_blank">${e}</a></div>\n          <div style="font-size: 0.9rem; color: #505050; margin-top:-12px;">${Array.from(n[e]).join(", ")}</div>\n        `,t.addEventListener("click",(()=>{window.location.href=a})),o.appendChild(t)}));else{const e=document.createElement("div");e.textContent="Tidak ada hasil ditemukan.",o.appendChild(e),o.style.display="block"}})(e.target.value)})),document.addEventListener("click",(e=>{n.contains(e.target)||o.contains(e.target)||(o.style.display="none")}))}));
